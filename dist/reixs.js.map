{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","src/handler.js","src/reixs.js","src/request.js","src/shared/constants.js","src/shared/utli.js"],"names":[],"mappings":"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","file":"reixs.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","module.exports = require('./src/reixs').default","import {METHOD_TYPES} from './shared/constants'\nimport request from './request'\n\nexport default class {\n    constructor(...args) {\n        console.log(1)\n        const [global, globalPipes, url, method = 'get', params = null] = args\n        // Cannot be modified\n        this.url = url\n        this.globalHeader = {...global.globalHeader}\n        this.globalParams = {...global.globalParams}\n        this.globalReqPipes = [...globalPipes.reqPipes]\n        this.globalResPipes = [...globalPipes.resPipes]\n        this.params = params\n        this.setMethod(method)\n    }\n\n    observers = []\n\n    on(observer) {\n        this.observers.push(observer)\n        return this\n    }\n    \n    x = async (params = this.params, type) =>{\n        const {url, method, globalParams} = this\n        const requestType = type ? type : method\n        const requestParams = requestType === 'push' \n            ? params : {\n                ...globalParams,\n                ...params\n            }\n        const data = await request[requestType](\n            url, \n            requestParams\n        )\n        this.execute(data)\n    }\n\n    execute(data) {\n        this.observers.forEach(observer =>{\n            observer(data)\n        })\n    }\n\n    setParams(params) {\n        this.params = params\n    }\n\n    setMethod(method = null) {\n        if (METHOD_TYPES.includes(method)) {\n            this.method = method\n        } else {\n            throw new Error('Invalid method')\n        }\n    }\n}\n\n","import Handler from './handler'\n\n// Multiple requests Shared\nconst global = {\n    globalHeader: {},\n    globalParams: {}\n}\n\n// Processing parameters\nconst globalPipes = {\n    reqPipes: [],\n    resPipes: []\n}\n\n/**\n * Create reixs \n * \n * @param {string} url \n * @param {string} method\n * @param {*} params  \n */\nfunction createInstance(url, method, params) {\n    return new Handler(global, globalPipes, url, method, params)\n}\n\n/**\n * Set pipe \n * \n * @param {string} name \n * @param  {...any} funList \n */\nfunction setPipes(name, ...funList) {\n    globalPipes[name] = [...funList]\n}\n\nexport default new Proxy(createInstance, {\n    get(target, property) {\n        switch (property) {\n        // Replaced by browserify-versionify transform\n        case 'version':\n            return '__VERSION__'\n        // Set request and response pipe\n        case 'reqPipes':\n        case 'resPipes':\n            return setPipes.bind(null, property)\n        }\n    },\n    set(target, property, value) {\n        // Must be set to Object\n        if (Reflect.has(global, property) \n            && value.constructor === Object) {\n            global[property] = value\n        } else {\n            throw new Error('Invalid Settings')\n        }\n    }\n})\n\n\n","import {handleFetch} from './shared/utli'\n\nexport default {\n    get(url, params) {\n        url = new URL(url)\n        Object.keys(params)\n            .forEach(key => url.searchParams.append(key, params[key]))\n        const promise = fetch(url, {\n            method: 'get'\n        })\n        return handleFetch(promise)\n    }\n}","export const METHOD_TYPES = [\n    'get',\n    'post',\n    'form',\n    'push'\n]\n\nexport const CONTENT_TYPE = {\n    JSON: 'application/json;charset=UTF-8',\n    FORM: 'application/x-www-form-urlencoded; charset=UTF-8'\n}","export function checkStatus(response) {\n    if (response.status === 200) {\n        return response.json()\n    } else {\n        throw new Error()\n    }\n}\n\nexport function handleFetch(promise) {\n    return promise\n        .then(response => checkStatus(response))\n        .catch(error => error)\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsInNyYy9oYW5kbGVyLmpzIiwic3JjL3JlaXhzLmpzIiwic3JjL3JlcXVlc3QuanMiLCJzcmMvc2hhcmVkL2NvbnN0YW50cy5qcyIsInNyYy9zaGFyZWQvdXRsaS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsT0FBTyxDQUFDLGFBQUQsQ0FBUCxDQUF1QixPQUF4Qzs7Ozs7Ozs7OztBQ0FBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdJLHNCQUFxQjtBQUFBOztBQUFBOztBQUFBLFNBYXJCLFNBYnFCLEdBYVQsRUFiUztBQUFBLFNBb0JyQixDQXBCcUI7QUFBQTtBQUFBO0FBQUE7QUFBQSw0QkFvQmpCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBTyxjQUFBLE1BQVAsMkRBQWdCLEtBQUksQ0FBQyxNQUFyQjtBQUE2QixjQUFBLElBQTdCO0FBQ08sY0FBQSxHQURQLEdBQ29DLEtBRHBDLENBQ08sR0FEUCxFQUNZLE1BRFosR0FDb0MsS0FEcEMsQ0FDWSxNQURaLEVBQ29CLFlBRHBCLEdBQ29DLEtBRHBDLENBQ29CLFlBRHBCO0FBRU0sY0FBQSxXQUZOLEdBRW9CLElBQUksR0FBRyxJQUFILEdBQVUsTUFGbEM7QUFHTSxjQUFBLGFBSE4sR0FHc0IsV0FBVyxLQUFLLE1BQWhCLEdBQ2hCLE1BRGdCLHFCQUVYLFlBRlcsRUFHWCxNQUhXLENBSHRCO0FBQUE7QUFBQSxxQkFRbUIsaUJBQVEsV0FBUixFQUNmLEdBRGUsRUFFZixhQUZlLENBUm5COztBQUFBO0FBUU0sY0FBQSxJQVJOOztBQVlBLGNBQUEsS0FBSSxDQUFDLE9BQUwsQ0FBYSxJQUFiOztBQVpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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LEVBRUYsS0FGRSxDQUVJLFVBQUEsS0FBSztBQUFBLFdBQUksS0FBSjtBQUFBLEdBRlQsQ0FBUDtBQUdIIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3NyYy9yZWl4cycpLmRlZmF1bHQiLCJpbXBvcnQge01FVEhPRF9UWVBFU30gZnJvbSAnLi9zaGFyZWQvY29uc3RhbnRzJ1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnLi9yZXF1ZXN0J1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICBjb25zb2xlLmxvZygxKVxuICAgICAgICBjb25zdCBbZ2xvYmFsLCBnbG9iYWxQaXBlcywgdXJsLCBtZXRob2QgPSAnZ2V0JywgcGFyYW1zID0gbnVsbF0gPSBhcmdzXG4gICAgICAgIC8vIENhbm5vdCBiZSBtb2RpZmllZFxuICAgICAgICB0aGlzLnVybCA9IHVybFxuICAgICAgICB0aGlzLmdsb2JhbEhlYWRlciA9IHsuLi5nbG9iYWwuZ2xvYmFsSGVhZGVyfVxuICAgICAgICB0aGlzLmdsb2JhbFBhcmFtcyA9IHsuLi5nbG9iYWwuZ2xvYmFsUGFyYW1zfVxuICAgICAgICB0aGlzLmdsb2JhbFJlcVBpcGVzID0gWy4uLmdsb2JhbFBpcGVzLnJlcVBpcGVzXVxuICAgICAgICB0aGlzLmdsb2JhbFJlc1BpcGVzID0gWy4uLmdsb2JhbFBpcGVzLnJlc1BpcGVzXVxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtc1xuICAgICAgICB0aGlzLnNldE1ldGhvZChtZXRob2QpXG4gICAgfVxuXG4gICAgb2JzZXJ2ZXJzID0gW11cblxuICAgIG9uKG9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICAgIFxuICAgIHggPSBhc3luYyAocGFyYW1zID0gdGhpcy5wYXJhbXMsIHR5cGUpID0+e1xuICAgICAgICBjb25zdCB7dXJsLCBtZXRob2QsIGdsb2JhbFBhcmFtc30gPSB0aGlzXG4gICAgICAgIGNvbnN0IHJlcXVlc3RUeXBlID0gdHlwZSA/IHR5cGUgOiBtZXRob2RcbiAgICAgICAgY29uc3QgcmVxdWVzdFBhcmFtcyA9IHJlcXVlc3RUeXBlID09PSAncHVzaCcgXG4gICAgICAgICAgICA/IHBhcmFtcyA6IHtcbiAgICAgICAgICAgICAgICAuLi5nbG9iYWxQYXJhbXMsXG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zXG4gICAgICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXF1ZXN0W3JlcXVlc3RUeXBlXShcbiAgICAgICAgICAgIHVybCwgXG4gICAgICAgICAgICByZXF1ZXN0UGFyYW1zXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5leGVjdXRlKGRhdGEpXG4gICAgfVxuXG4gICAgZXhlY3V0ZShkYXRhKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT57XG4gICAgICAgICAgICBvYnNlcnZlcihkYXRhKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHNldFBhcmFtcyhwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXNcbiAgICB9XG5cbiAgICBzZXRNZXRob2QobWV0aG9kID0gbnVsbCkge1xuICAgICAgICBpZiAoTUVUSE9EX1RZUEVTLmluY2x1ZGVzKG1ldGhvZCkpIHtcbiAgICAgICAgICAgIHRoaXMubWV0aG9kID0gbWV0aG9kXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbWV0aG9kJylcbiAgICAgICAgfVxuICAgIH1cbn1cblxuIiwiaW1wb3J0IEhhbmRsZXIgZnJvbSAnLi9oYW5kbGVyJ1xuXG4vLyBNdWx0aXBsZSByZXF1ZXN0cyBTaGFyZWRcbmNvbnN0IGdsb2JhbCA9IHtcbiAgICBnbG9iYWxIZWFkZXI6IHt9LFxuICAgIGdsb2JhbFBhcmFtczoge31cbn1cblxuLy8gUHJvY2Vzc2luZyBwYXJhbWV0ZXJzXG5jb25zdCBnbG9iYWxQaXBlcyA9IHtcbiAgICByZXFQaXBlczogW10sXG4gICAgcmVzUGlwZXM6IFtdXG59XG5cbi8qKlxuICogQ3JlYXRlIHJlaXhzIFxuICogXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHsqfSBwYXJhbXMgIFxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZSh1cmwsIG1ldGhvZCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBIYW5kbGVyKGdsb2JhbCwgZ2xvYmFsUGlwZXMsIHVybCwgbWV0aG9kLCBwYXJhbXMpXG59XG5cbi8qKlxuICogU2V0IHBpcGUgXG4gKiBcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuICogQHBhcmFtICB7Li4uYW55fSBmdW5MaXN0IFxuICovXG5mdW5jdGlvbiBzZXRQaXBlcyhuYW1lLCAuLi5mdW5MaXN0KSB7XG4gICAgZ2xvYmFsUGlwZXNbbmFtZV0gPSBbLi4uZnVuTGlzdF1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFByb3h5KGNyZWF0ZUluc3RhbmNlLCB7XG4gICAgZ2V0KHRhcmdldCwgcHJvcGVydHkpIHtcbiAgICAgICAgc3dpdGNoIChwcm9wZXJ0eSkge1xuICAgICAgICAvLyBSZXBsYWNlZCBieSBicm93c2VyaWZ5LXZlcnNpb25pZnkgdHJhbnNmb3JtXG4gICAgICAgIGNhc2UgJ3ZlcnNpb24nOlxuICAgICAgICAgICAgcmV0dXJuICdfX1ZFUlNJT05fXydcbiAgICAgICAgLy8gU2V0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHBpcGVcbiAgICAgICAgY2FzZSAncmVxUGlwZXMnOlxuICAgICAgICBjYXNlICdyZXNQaXBlcyc6XG4gICAgICAgICAgICByZXR1cm4gc2V0UGlwZXMuYmluZChudWxsLCBwcm9wZXJ0eSlcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0KHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgICAgIC8vIE11c3QgYmUgc2V0IHRvIE9iamVjdFxuICAgICAgICBpZiAoUmVmbGVjdC5oYXMoZ2xvYmFsLCBwcm9wZXJ0eSkgXG4gICAgICAgICAgICAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICBnbG9iYWxbcHJvcGVydHldID0gdmFsdWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBTZXR0aW5ncycpXG4gICAgICAgIH1cbiAgICB9XG59KVxuXG5cbiIsImltcG9ydCB7aGFuZGxlRmV0Y2h9IGZyb20gJy4vc2hhcmVkL3V0bGknXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBnZXQodXJsLCBwYXJhbXMpIHtcbiAgICAgICAgdXJsID0gbmV3IFVSTCh1cmwpXG4gICAgICAgIE9iamVjdC5rZXlzKHBhcmFtcylcbiAgICAgICAgICAgIC5mb3JFYWNoKGtleSA9PiB1cmwuc2VhcmNoUGFyYW1zLmFwcGVuZChrZXksIHBhcmFtc1trZXldKSlcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IGZldGNoKHVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnZ2V0J1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gaGFuZGxlRmV0Y2gocHJvbWlzZSlcbiAgICB9XG59IiwiZXhwb3J0IGNvbnN0IE1FVEhPRF9UWVBFUyA9IFtcbiAgICAnZ2V0JyxcbiAgICAncG9zdCcsXG4gICAgJ2Zvcm0nLFxuICAgICdwdXNoJ1xuXVxuXG5leHBvcnQgY29uc3QgQ09OVEVOVF9UWVBFID0ge1xuICAgIEpTT046ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgnLFxuICAgIEZPUk06ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnXG59IiwiZXhwb3J0IGZ1bmN0aW9uIGNoZWNrU3RhdHVzKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUZldGNoKHByb21pc2UpIHtcbiAgICByZXR1cm4gcHJvbWlzZVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiBjaGVja1N0YXR1cyhyZXNwb25zZSkpXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiBlcnJvcilcbn0iXX0="}