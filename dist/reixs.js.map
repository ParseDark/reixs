{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","src/handler.js","src/reixs.js","src/request.js","src/shared/constants.js"],"names":[],"mappings":"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","file":"reixs.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","module.exports = require('./src/reixs').default","import {METHOD_TYPES} from './shared/constants'\nimport request from './request'\n\nexport default class {\n    constructor(...args) {\n        const [global, globalPipes, url, method = 'get', params = null] = args\n        // Cannot be modified\n        this.url = url\n        this.globalHeader = {...global.globalHeader}\n        this.globalParams = {...global.globalParams}\n        this.globalReqPipes = [...globalPipes.reqPipes]\n        this.globalResPipes = [...globalPipes.resPipes]\n        this.params = params\n        this.setMethod(method)\n    }\n\n    observers = []\n\n    on(observer) {\n        this.observers.push(observer)\n        return this\n    }\n    \n    x = async (params = this.params, type) =>{\n        const {url, method, globalParams} = this\n        const requestType = type ? type : method\n        const requestParams = requestType === 'push' \n            ? params : {\n                ...globalParams,\n                ...params\n            }\n        const data = await request[requestType](\n            url, \n            requestParams\n        )\n        this.execute(data)\n    }\n\n    execute(data) {\n        this.observers.forEach(observer =>{\n            observer(data)\n        })\n    }\n\n    setParams(params) {\n        this.params = params\n    }\n\n    setMethod(method = null) {\n        if (METHOD_TYPES.includes(method)) {\n            this.method = method\n        } else {\n            throw new Error('Invalid method')\n        }\n    }\n}\n\n","import Handler from './handler'\n\n// Multiple requests Shared\nconst global = {\n    globalHeader: {},\n    globalParams: {}\n}\n\n// Processing parameters\nconst globalPipes = {\n    reqPipes: [],\n    resPipes: []\n}\n\n/**\n * Create reixs \n * \n * @param {string} url \n * @param {string} method\n * @param {*} params  \n */\nfunction createInstance(url, method, params) {\n    return new Handler(global, globalPipes, url, method, params)\n}\n\n/**\n * Set pipe \n * \n * @param {string} name \n * @param  {...any} funList \n */\nfunction setPipes(name, ...funList) {\n    globalPipes[name] = [...funList]\n}\n\nexport default new Proxy(createInstance, {\n    get(target, property) {\n        switch (property) {\n        // Replaced by browserify-versionify transform\n        case 'version':\n            return '__VERSION__'\n        // Set request and response pipe\n        case 'reqPipes':\n        case 'resPipes':\n            return setPipes.bind(null, property)\n        }\n    },\n    set(target, property, value) {\n        // Must be set to Object\n        if (Reflect.has(global, property) \n            && value.constructor === Object) {\n            global[property] = value\n        } else {\n            throw new Error('Invalid Settings')\n        }\n    }\n})\n\n\n","function checkStatus(response) {\n    if (response.status === 200) {\n        return response.json()\n    } else {\n        throw new Error()\n    }\n}\n\nfunction handleFetch(promise) {\n    return promise\n        .then(response => checkStatus(response))\n        .catch(error => error)\n}\n\nexport default {\n    get(url, params) {\n        url = new URL(url)\n        Object.keys(params)\n            .forEach(key => url.searchParams.append(key, params[key]))\n        const promise = fetch(url, {\n            method: 'get'\n        })\n        return handleFetch(promise)\n    }\n}","export const METHOD_TYPES = [\n    'get',\n    'post',\n    'form',\n    'push'\n]\n\nexport const CONTENT_TYPE = {\n    JSON: 'application/json;charset=UTF-8',\n    FORM: 'application/x-www-form-urlencoded; charset=UTF-8'\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJpbmRleC5qcyIsInNyYy9oYW5kbGVyLmpzIiwic3JjL3JlaXhzLmpzIiwic3JjL3JlcXVlc3QuanMiLCJzcmMvc2hhcmVkL2NvbnN0YW50cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsTUFBTSxDQUFDLE9BQVAsR0FBaUIsT0FBTyxDQUFDLGFBQUQsQ0FBUCxDQUF1QixPQUF4Qzs7Ozs7Ozs7OztBQ0FBOztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUdJLHNCQUFxQjtBQUFBOztBQUFBOztBQUFBLFNBWXJCLFNBWnFCLEdBWVQsRUFaUztBQUFBLFNBbUJyQixDQW5CcUI7QUFBQTtBQUFBO0FBQUE7QUFBQSw0QkFtQmpCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBTyxjQUFBLE1BQVAsMkRBQWdCLEtBQUksQ0FBQyxNQUFyQjtBQUE2QixjQUFBLElBQTdCO0FBQ08sY0FBQSxHQURQLEdBQ29DLEtBRHBDLENBQ08sR0FEUCxFQUNZLE1BRFosR0FDb0MsS0FEcEMsQ0FDWSxNQURaLEVBQ29CLFlBRHBCLEdBQ29DLEtBRHBDLENBQ29CLFlBRHBCO0FBRU0sY0FBQSxXQUZOLEdBRW9CLElBQUksR0FBRyxJQUFILEdBQVUsTUFGbEM7QUFHTSxjQUFBLGFBSE4sR0FHc0IsV0FBVyxLQUFLLE1BQWhCLEdBQ2hCLE1BRGdCLHFCQUVYLFlBRlcsRUFHWCxNQUhXLENBSHRCO0FBQUE7QUFBQSxxQkFRbUIsaUJBQVEsV0FBUixFQUNmLEdBRGUsRUFFZixhQUZlLENBUm5COztBQUFBO0FBUU0sY0FBQSxJQVJOOztBQVlBLGNBQUEsS0FBSSxDQUFDLE9BQUwsQ0FBYSxJQUFiOztBQVpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEtBbkJpQjs7QUFBQSxzQ0FBTixJ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ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL3NyYy9yZWl4cycpLmRlZmF1bHQiLCJpbXBvcnQge01FVEhPRF9UWVBFU30gZnJvbSAnLi9zaGFyZWQvY29uc3RhbnRzJ1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnLi9yZXF1ZXN0J1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyB7XG4gICAgY29uc3RydWN0b3IoLi4uYXJncykge1xuICAgICAgICBjb25zdCBbZ2xvYmFsLCBnbG9iYWxQaXBlcywgdXJsLCBtZXRob2QgPSAnZ2V0JywgcGFyYW1zID0gbnVsbF0gPSBhcmdzXG4gICAgICAgIC8vIENhbm5vdCBiZSBtb2RpZmllZFxuICAgICAgICB0aGlzLnVybCA9IHVybFxuICAgICAgICB0aGlzLmdsb2JhbEhlYWRlciA9IHsuLi5nbG9iYWwuZ2xvYmFsSGVhZGVyfVxuICAgICAgICB0aGlzLmdsb2JhbFBhcmFtcyA9IHsuLi5nbG9iYWwuZ2xvYmFsUGFyYW1zfVxuICAgICAgICB0aGlzLmdsb2JhbFJlcVBpcGVzID0gWy4uLmdsb2JhbFBpcGVzLnJlcVBpcGVzXVxuICAgICAgICB0aGlzLmdsb2JhbFJlc1BpcGVzID0gWy4uLmdsb2JhbFBpcGVzLnJlc1BpcGVzXVxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtc1xuICAgICAgICB0aGlzLnNldE1ldGhvZChtZXRob2QpXG4gICAgfVxuXG4gICAgb2JzZXJ2ZXJzID0gW11cblxuICAgIG9uKG9ic2VydmVyKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICAgIFxuICAgIHggPSBhc3luYyAocGFyYW1zID0gdGhpcy5wYXJhbXMsIHR5cGUpID0+e1xuICAgICAgICBjb25zdCB7dXJsLCBtZXRob2QsIGdsb2JhbFBhcmFtc30gPSB0aGlzXG4gICAgICAgIGNvbnN0IHJlcXVlc3RUeXBlID0gdHlwZSA/IHR5cGUgOiBtZXRob2RcbiAgICAgICAgY29uc3QgcmVxdWVzdFBhcmFtcyA9IHJlcXVlc3RUeXBlID09PSAncHVzaCcgXG4gICAgICAgICAgICA/IHBhcmFtcyA6IHtcbiAgICAgICAgICAgICAgICAuLi5nbG9iYWxQYXJhbXMsXG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zXG4gICAgICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXF1ZXN0W3JlcXVlc3RUeXBlXShcbiAgICAgICAgICAgIHVybCwgXG4gICAgICAgICAgICByZXF1ZXN0UGFyYW1zXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5leGVjdXRlKGRhdGEpXG4gICAgfVxuXG4gICAgZXhlY3V0ZShkYXRhKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmZvckVhY2gob2JzZXJ2ZXIgPT57XG4gICAgICAgICAgICBvYnNlcnZlcihkYXRhKVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHNldFBhcmFtcyhwYXJhbXMpIHtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXNcbiAgICB9XG5cbiAgICBzZXRNZXRob2QobWV0aG9kID0gbnVsbCkge1xuICAgICAgICBpZiAoTUVUSE9EX1RZUEVTLmluY2x1ZGVzKG1ldGhvZCkpIHtcbiAgICAgICAgICAgIHRoaXMubWV0aG9kID0gbWV0aG9kXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbWV0aG9kJylcbiAgICAgICAgfVxuICAgIH1cbn1cblxuIiwiaW1wb3J0IEhhbmRsZXIgZnJvbSAnLi9oYW5kbGVyJ1xuXG4vLyBNdWx0aXBsZSByZXF1ZXN0cyBTaGFyZWRcbmNvbnN0IGdsb2JhbCA9IHtcbiAgICBnbG9iYWxIZWFkZXI6IHt9LFxuICAgIGdsb2JhbFBhcmFtczoge31cbn1cblxuLy8gUHJvY2Vzc2luZyBwYXJhbWV0ZXJzXG5jb25zdCBnbG9iYWxQaXBlcyA9IHtcbiAgICByZXFQaXBlczogW10sXG4gICAgcmVzUGlwZXM6IFtdXG59XG5cbi8qKlxuICogQ3JlYXRlIHJlaXhzIFxuICogXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFxuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxuICogQHBhcmFtIHsqfSBwYXJhbXMgIFxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZSh1cmwsIG1ldGhvZCwgcGFyYW1zKSB7XG4gICAgcmV0dXJuIG5ldyBIYW5kbGVyKGdsb2JhbCwgZ2xvYmFsUGlwZXMsIHVybCwgbWV0aG9kLCBwYXJhbXMpXG59XG5cbi8qKlxuICogU2V0IHBpcGUgXG4gKiBcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFxuICogQHBhcmFtICB7Li4uYW55fSBmdW5MaXN0IFxuICovXG5mdW5jdGlvbiBzZXRQaXBlcyhuYW1lLCAuLi5mdW5MaXN0KSB7XG4gICAgZ2xvYmFsUGlwZXNbbmFtZV0gPSBbLi4uZnVuTGlzdF1cbn1cblxuZXhwb3J0IGRlZmF1bHQgbmV3IFByb3h5KGNyZWF0ZUluc3RhbmNlLCB7XG4gICAgZ2V0KHRhcmdldCwgcHJvcGVydHkpIHtcbiAgICAgICAgc3dpdGNoIChwcm9wZXJ0eSkge1xuICAgICAgICAvLyBSZXBsYWNlZCBieSBicm93c2VyaWZ5LXZlcnNpb25pZnkgdHJhbnNmb3JtXG4gICAgICAgIGNhc2UgJ3ZlcnNpb24nOlxuICAgICAgICAgICAgcmV0dXJuICdfX1ZFUlNJT05fXydcbiAgICAgICAgLy8gU2V0IHJlcXVlc3QgYW5kIHJlc3BvbnNlIHBpcGVcbiAgICAgICAgY2FzZSAncmVxUGlwZXMnOlxuICAgICAgICBjYXNlICdyZXNQaXBlcyc6XG4gICAgICAgICAgICByZXR1cm4gc2V0UGlwZXMuYmluZChudWxsLCBwcm9wZXJ0eSlcbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2V0KHRhcmdldCwgcHJvcGVydHksIHZhbHVlKSB7XG4gICAgICAgIC8vIE11c3QgYmUgc2V0IHRvIE9iamVjdFxuICAgICAgICBpZiAoUmVmbGVjdC5oYXMoZ2xvYmFsLCBwcm9wZXJ0eSkgXG4gICAgICAgICAgICAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICBnbG9iYWxbcHJvcGVydHldID0gdmFsdWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBTZXR0aW5ncycpXG4gICAgICAgIH1cbiAgICB9XG59KVxuXG5cbiIsImZ1bmN0aW9uIGNoZWNrU3RhdHVzKHJlc3BvbnNlKSB7XG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlRmV0Y2gocHJvbWlzZSkge1xuICAgIHJldHVybiBwcm9taXNlXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IGNoZWNrU3RhdHVzKHJlc3BvbnNlKSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGVycm9yKVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZ2V0KHVybCwgcGFyYW1zKSB7XG4gICAgICAgIHVybCA9IG5ldyBVUkwodXJsKVxuICAgICAgICBPYmplY3Qua2V5cyhwYXJhbXMpXG4gICAgICAgICAgICAuZm9yRWFjaChrZXkgPT4gdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCBwYXJhbXNba2V5XSkpXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ2dldCdcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGhhbmRsZUZldGNoKHByb21pc2UpXG4gICAgfVxufSIsImV4cG9ydCBjb25zdCBNRVRIT0RfVFlQRVMgPSBbXG4gICAgJ2dldCcsXG4gICAgJ3Bvc3QnLFxuICAgICdmb3JtJyxcbiAgICAncHVzaCdcbl1cblxuZXhwb3J0IGNvbnN0IENPTlRFTlRfVFlQRSA9IHtcbiAgICBKU09OOiAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04JyxcbiAgICBGT1JNOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04J1xufSJdfQ=="}